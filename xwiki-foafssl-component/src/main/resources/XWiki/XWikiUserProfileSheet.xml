<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc>
<web>XWiki</web>
<name>XWikiUserProfileSheet</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>XWiki.XWikiUserSheet</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1262856167000</creationDate>
<date>1266589377000</date>
<contentUpdateDate>1266589377000</contentUpdateDate>
<version>6.1</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>false</minorEdit>
<syntaxId>xwiki/2.0</syntaxId>
<hidden>false</hidden>
<object>
<class>
<name>XWiki.TagClass</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<tags>
<cache>0</cache>
<displayType>input</displayType>
<multiSelect>1</multiSelect>
<name>tags</name>
<number>1</number>
<prettyName>Tags</prettyName>
<relationalStorage>1</relationalStorage>
<separator> </separator>
<separators> ,|</separators>
<size>30</size>
<unmodifiable>0</unmodifiable>
<values></values>
<classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
</tags>
</class>
<name>XWiki.XWikiUserProfileSheet</name>
<number>0</number>
<className>XWiki.TagClass</className>
<guid>981b703e-1d9c-4bc6-a425-b3ef2615af6e</guid>
<property>
<tags/>
</property>
</object>
<content>{{velocity}}
#set($obj = $doc.getObject("XWiki.XWikiUsers"))
#if(!$obj)
= $msg.get('xe.admin.users.sheet') =

{{info}}$msg.get('xe.admin.users.applyonusers'){{/info}}
#else
{{html clean="false" wiki="true"}}
#set($username = $xwiki.getUserName($doc.fullName, false))
= $msg.get('platform.core.profile.title', [$username]) =
#if($context.action == 'view')
  &lt;div xmlns:foaf="http:~/~/xmlns.com/foaf/0.1/"
       xmlns:dct="http:~/~/purl.org/dc/terms/"
       xmlns:contact="http:~/~/www.w3.org/2000/10/swap/pim/contact#"
       xmlns:cert="http:~/~/www.w3.org/ns/auth/cert#"
       xmlns:rsa="http:~/~/www.w3.org/ns/auth/rsa#"
       about="#me" typeof="foaf:Person"
       class="vcard"&gt;
  &lt;span typeof="foaf:OnlineAccount" property="foaf:accountName" class="fn hidden"&gt;$username&lt;/span&gt;
#end
$xwiki.ssx.use("XWiki.XWikiUserSheet")##
$xwiki.ssx.use('Main.Dashboard')##
&lt;div class="dashboard dashboard${context.action}"&gt;
  &lt;div class="dashboardleft"&gt;
    &lt;div class="userInfo"&gt;
      #if($context.action == 'view' &amp;&amp; $hasEdit)
        &lt;div class="editProfileCategory"&gt;&lt;a href="$doc.getURL('inline', 'category=profile')"&gt;&lt;span class="hidden"&gt;$msg.get('platform.core.profile.category.profile.edit')&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;
      #end
      ## Please do not insert extra empty lines here (as it affects the validity of the rendered xhtml)
      &lt;h1&gt;$msg.get('platform.core.profile.section.personal')&lt;/h1&gt;
      &lt;dl&gt;
        &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.firstname')&lt;/label&gt;&lt;/dt&gt;
        &lt;dd #if($context.action == 'view')property="foaf:firstName" class="given-name"#end&gt;$doc.display('first_name')&lt;/dd&gt;
        &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.lastname')&lt;/label&gt;&lt;/dt&gt;
        &lt;dd #if($context.action == 'view')property="foaf:familyName" class="family-name"#end&gt;$doc.display('last_name')&lt;/dd&gt;
        #if(($obj.getProperty('company') &amp;&amp; $obj.getProperty('company').getValue() != '') || $context.action == 'inline')
          &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.company')&lt;/label&gt;&lt;/dt&gt;
          &lt;dd #if($context.action == 'view')class="org"#end&gt;$doc.display('company')&lt;/dd&gt;
        #end
        #if(($obj.getProperty('comment') &amp;&amp; $obj.getProperty('comment').getValue() != '') || $context.action == 'inline')
          &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.about')&lt;/label&gt;&lt;/dt&gt;
          &lt;dd #if($context.action == 'view')property="dct:description" class="note"#end&gt;$doc.display('comment')&lt;/dd&gt;
        #end
      &lt;/dl&gt;
      &lt;h1&gt;$msg.get('platform.core.profile.section.contact')&lt;/h1&gt;
      &lt;dl&gt;
        ## For security reasons do not display emails by default
        ## #if(($obj.getProperty('email') &amp;&amp; $obj.getProperty('email').getValue() != '') || $context.action == 'inline')
        ## &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.email')&lt;/label&gt;&lt;/dt&gt;
        ## &lt;dd #if($context.action=="view")class="email"#end&gt;#if($action == "inline")$doc.display('email')#else #set($discard = $doc.display('email'))#obfuscate($discard)#end&lt;/dd&gt;
        ## #end
        &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.phone')&lt;/label&gt;&lt;/dt&gt;
        &lt;dd #if($context.action == 'view')class="tel"#end&gt;&lt;a rel="foaf:phone" href="tel:$doc.display('phone')"&gt;$doc.display('phone')&lt;/a&gt;&lt;/dd&gt;
        &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.address')&lt;/label&gt;&lt;/dt&gt;
        &lt;dd #if($context.action == 'view')class="adr"#end&gt;$doc.display('address')&lt;/dd&gt;
      &lt;/dl&gt;
      &lt;h1&gt;Public Keys&lt;/h3&gt;
      &lt;p&gt;A list of keys&lt;/p&gt;
     #if($hasEdit)
     &lt;form id="keygenform" action="/xwiki/bin/view/XWiki/keygen" method="post"&gt;
       &lt;table&gt;
	 &lt;tr&gt;
		&lt;td&gt;Common Name (to help you identify the certificate):&lt;/td&gt;
		&lt;td&gt;&lt;input name="cn" id="cn" type="text" value="" /&gt;&lt;/td&gt;
	 &lt;/tr&gt;
	 &lt;tr&gt;
		&lt;td&gt;WebID:&lt;/td&gt;
		&lt;td&gt;&lt;input name="webid" id="webid" type="text" value="" /&gt;&lt;/td&gt;
	 &lt;/tr&gt;
	 &lt;tr&gt;
		&lt;td&gt;Key strength:&lt;/td&gt;
		&lt;td id="keystrenghtd"&gt;&lt;keygen id="spkac" name="spkac"
			challenge="TheChallenge1"/&gt;&lt;/td&gt;
	 &lt;/tr&gt;
       &lt;/table&gt;
       &lt;input id="keygensubmit" type="submit" /&gt;
     &lt;/form&gt;
     #end    
      #set($hasBlog = ($obj.getProperty('blog') &amp;&amp; $obj.getProperty('blog').getValue() != ''))
      #set($hasBlogFeed = ($obj.getProperty('blogfeed') &amp;&amp; $obj.getProperty('blogfeed').getValue() != ''))
      #if($hasBlog || $hasBlogFeed || $context.action == 'inline')
       &lt;h1&gt;$msg.get('platform.core.profile.section.links')&lt;/h1&gt;
        &lt;dl&gt;
          #if($hasBlog || $context.action == 'inline')
            &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.blog')&lt;/label&gt;&lt;/dt&gt;
            &lt;dd&gt;$doc.display('blog')&lt;/dd&gt;
          #end
          #if($hasBlogFeed || $context.action == 'inline')
            &lt;dt class="label"&gt;&lt;label&gt;$msg.get('platform.core.profile.blogFeed')&lt;/label&gt;&lt;/dt&gt;
            &lt;dd&gt;$doc.display('blogfeed')&lt;/dd&gt;
          #end
        &lt;/dl&gt;
      #end
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="dashboardright"&gt;
    #if ($context.action == 'view')
      &lt;div class="userRecentChanges"&gt;
        &lt;h1&gt;$msg.get('platform.core.profile.section.recentChanges')&lt;/h1&gt;
        {{/html}}
        #set ($rcAuthor = [$doc.fullName])
        #set ($rcChangesNb = 10)
        {{include document="Main.RecentChanges"/}}
        {{html clean="false"}}
      &lt;/div&gt;
    #end
  &lt;/div&gt;
  &lt;div class="dashboardspacer"&gt;&amp;nbsp;&lt;/div&gt;
&lt;/div&gt;
#if($context.action == 'view')
  ## Close the vcard
  &lt;/div&gt;
#end
{{/html}}
#end
{{/velocity}}</content>
</xwikidoc>
